<mat-accordion multi="true">
  <div *ngFor="let header of NavItems | filter: isTopLevel">
    <mat-expansion-panel class="sidebar-menu-item">
      <mat-expansion-panel-header
        class="sidebar-menu-item-title"
        [collapsedHeight]="'48px'"
        [expandedHeight]="'48px'"
      >
        <div class="sidebar-menu-item-content">
          <mat-icon
            class="sidebar-menu-icon"
            *ngIf="header.icon_type == 'mat'; else faIcon">{{
            header.icon
          }}</mat-icon>
          <ng-template #faIcon>
            <fa-icon
              class="sidebar-menu-icon"
              [icon]="[header.icon_type, header.icon]"
              size="lg"
            ></fa-icon>
          </ng-template>
          <mat-panel-title class="sidebar-menu-item-label">{{
            header.label
          }}</mat-panel-title>
        </div>
      </mat-expansion-panel-header>
      <div
        *ngFor="let route of NavItems | filter: isChildOf:[header]"
      >
        <mat-list-item
          *ngIf="route.display == 'always' || (auth.loggedIn && route.display == 'loggedIn') || (!auth.loggedIn && route.display == 'loggedOut')"
          [routerLink]="route.link"
          [disableRipple]="true">
          <mat-icon class="sidebar-menu-icon" *ngIf="route.icon_type == 'mat'; else faIcon">{{ route.icon }}</mat-icon>
          {{ route.label }}
          <ng-template #faIcon>
            <fa-icon class="sidebar-menu-icon" [icon]="[route.icon_type, route.icon]" size="lg"></fa-icon>
          </ng-template>
        </mat-list-item>
      </div>
    </mat-expansion-panel>
  </div>
</mat-accordion>
